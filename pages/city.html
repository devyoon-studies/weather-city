<!DOCTYPE html>
<html lang="ko">
    <head>
        <meta charset="UTF-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1.0" />
        <title>ì„œìš¸ ë‚ ì”¨ - ê°•ë‚¨êµ¬</title>
        <link rel="stylesheet" href="../css/common.css" />
    </head>
    <body>
        <div class="container">
            <div class="scroll-container">
                <!-- Header -->
                <div class="header">
                    <h1 class="city-name" id="cityName">ê°•ë‚¨êµ¬</h1>
                    <p class="city-name-en" id="cityNameEn">Gangnam-gu</p>
                </div>

                <!-- Current Weather -->
                <div class="current-weather-section">
                    <div class="temperature-container">
                        <div class="current-temperature" id="currentTemp">
                            33Â°
                        </div>
                        <div class="weather-info">
                            <div
                                class="weather-description"
                                id="weatherDescription"
                            >
                                ë§‘ìŒ
                            </div>
                            <div class="weather-icon" id="weatherIcon">â˜€ï¸</div>
                        </div>
                    </div>

                    <!-- Min/Max Temperature -->
                    <div class="min-max-container">
                        <div class="min-max-text" id="minMaxText">
                            ìµœê³  33Â° / ìµœì € 26Â°
                        </div>
                    </div>
                </div>

                <!-- Additional Weather Details -->
                <div class="details-section">
                    <h2 class="section-title">ìƒì„¸ ì •ë³´</h2>

                    <div class="detail-row">
                        <span class="detail-label">ì²´ê°ì˜¨ë„</span>
                        <span class="detail-value" id="feelsLike">40Â°C</span>
                    </div>

                    <div class="detail-row">
                        <span class="detail-label">ìŠµë„</span>
                        <span class="detail-value" id="humidity">59%</span>
                    </div>

                    <div class="detail-row">
                        <span class="detail-label">ê¸°ì••</span>
                        <span class="detail-value" id="pressure">1011 hPa</span>
                    </div>

                    <div class="detail-row">
                        <span class="detail-label">í’ì†</span>
                        <span class="detail-value" id="windSpeed">3.2 m/s</span>
                    </div>

                    <div class="detail-row">
                        <span class="detail-label">ê°€ì‹œê±°ë¦¬</span>
                        <span class="detail-value" id="visibility"
                            >10.0 km</span
                        >
                    </div>
                </div>
            </div>
        </div>

        <script>
            // URL íŒŒë¼ë¯¸í„°ì—ì„œ ë„ì‹œ ì´ë¦„ ê°€ì ¸ì˜¤ê¸°
            function getCityFromURL() {
                const urlParams = new URLSearchParams(window.location.search);
                const cityParam = urlParams.get("city");
                return cityParam ? decodeURIComponent(cityParam) : "ê°•ë‚¨êµ¬";
            }

            // ë„ì‹œë³„ ìƒ˜í”Œ ë°ì´í„°
            const cityData = {
                ê°•ë‚¨êµ¬: {
                    name: "ê°•ë‚¨êµ¬",
                    nameEn: "Gangnam-gu",
                    temp: 33,
                    description: "ë§‘ìŒ",
                    icon: "â˜€ï¸",
                    min: 26,
                    max: 33,
                    feelsLike: 40,
                    humidity: 59,
                    pressure: 1011,
                    windSpeed: 3.2,
                    visibility: 10.0,
                },
                ì¢…ë¡œêµ¬: {
                    name: "ì¢…ë¡œêµ¬",
                    nameEn: "Jongno-gu",
                    temp: 32,
                    description: "êµ¬ë¦„ì¡°ê¸ˆ",
                    icon: "â›…",
                    min: 25,
                    max: 32,
                    feelsLike: 38,
                    humidity: 62,
                    pressure: 1012,
                    windSpeed: 2.8,
                    visibility: 9.5,
                },
                ì¤‘êµ¬: {
                    name: "ì¤‘êµ¬",
                    nameEn: "Jung-gu",
                    temp: 31,
                    description: "íë¦¼",
                    icon: "â˜ï¸",
                    min: 24,
                    max: 31,
                    feelsLike: 36,
                    humidity: 65,
                    pressure: 1010,
                    windSpeed: 2.1,
                    visibility: 8.2,
                },
                ìš©ì‚°êµ¬: {
                    name: "ìš©ì‚°êµ¬",
                    nameEn: "Yongsan-gu",
                    temp: 30,
                    description: "êµ¬ë¦„ë§ìŒ",
                    icon: "â˜ï¸",
                    min: 23,
                    max: 30,
                    feelsLike: 35,
                    humidity: 68,
                    pressure: 1009,
                    windSpeed: 1.9,
                    visibility: 7.8,
                },
                ì„±ë™êµ¬: {
                    name: "ì„±ë™êµ¬",
                    nameEn: "Seongdong-gu",
                    temp: 29,
                    description: "ë¹„",
                    icon: "ğŸŒ§ï¸",
                    min: 22,
                    max: 29,
                    feelsLike: 33,
                    humidity: 75,
                    pressure: 1008,
                    windSpeed: 4.1,
                    visibility: 6.5,
                },
            };

            // í˜ì´ì§€ ë¡œë“œ ì‹œ ì‹¤í–‰
            document.addEventListener("DOMContentLoaded", function () {
                const cityName = getCityFromURL();
                const data = cityData[cityName] || cityData["ê°•ë‚¨êµ¬"];

                // ë°ì´í„° ì—…ë°ì´íŠ¸
                document.getElementById("cityName").textContent = data.name;
                document.getElementById("cityNameEn").textContent = data.nameEn;
                document.getElementById("currentTemp").textContent =
                    data.temp + "Â°";
                document.getElementById("weatherDescription").textContent =
                    data.description;
                document.getElementById("weatherIcon").textContent = data.icon;
                document.getElementById(
                    "minMaxText"
                ).textContent = `ìµœê³  ${data.max}Â° / ìµœì € ${data.min}Â°`;
                document.getElementById("feelsLike").textContent =
                    data.feelsLike + "Â°C";
                document.getElementById("humidity").textContent =
                    data.humidity + "%";
                document.getElementById("pressure").textContent =
                    data.pressure + " hPa";
                document.getElementById("windSpeed").textContent =
                    data.windSpeed + " m/s";
                document.getElementById("visibility").textContent =
                    data.visibility + " km";

                // í˜ì´ì§€ íƒ€ì´í‹€ ì—…ë°ì´íŠ¸
                document.title = `ì„œìš¸ ë‚ ì”¨ - ${data.name}`;
            });

            // React Native WebViewì—ì„œ í˜¸ì¶œí•  ìˆ˜ ìˆëŠ” í•¨ìˆ˜ë“¤
            window.updateWeatherData = function (newData) {
                if (newData.temp)
                    document.getElementById("currentTemp").textContent =
                        newData.temp + "Â°";
                if (newData.description)
                    document.getElementById("weatherDescription").textContent =
                        newData.description;
                if (newData.icon)
                    document.getElementById("weatherIcon").textContent =
                        newData.icon;
                if (newData.min && newData.max) {
                    document.getElementById(
                        "minMaxText"
                    ).textContent = `ìµœê³  ${newData.max}Â° / ìµœì € ${newData.min}Â°`;
                }
                if (newData.feelsLike)
                    document.getElementById("feelsLike").textContent =
                        newData.feelsLike + "Â°C";
                if (newData.humidity)
                    document.getElementById("humidity").textContent =
                        newData.humidity + "%";
                if (newData.pressure)
                    document.getElementById("pressure").textContent =
                        newData.pressure + " hPa";
                if (newData.windSpeed)
                    document.getElementById("windSpeed").textContent =
                        newData.windSpeed + " m/s";
                if (newData.visibility)
                    document.getElementById("visibility").textContent =
                        newData.visibility + " km";
            };

            window.updateCityInfo = function (cityName, cityNameEn) {
                document.getElementById("cityName").textContent = cityName;
                document.getElementById("cityNameEn").textContent = cityNameEn;
                document.title = `ì„œìš¸ ë‚ ì”¨ - ${cityName}`;
            };
        </script>
    </body>
</html>
